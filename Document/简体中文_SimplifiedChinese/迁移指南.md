# JustAnotherTranslator 迁移指南

欢迎提交任何改进和修复

仓库地址:  https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin


<br>

# 从 LBWtranslation/LBWmodifier 迁移

## 迁移前准备

请先按照 [README](https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin) 中的步骤完成插件初始化配置。

也就是这两个路径应该已经有文件了

- 配置文件位于: `COM3D2\BepInEx\config\Github.MeidoPromotionAssociation.COM3D2.JustAnotherTranslator.Plugin.cfg`
- 翻译文件夹根目录位于: `COM3D2\BepInEx\JustAnotherTranslator`

路径开头的 `COM3D2\` 都是指您的游戏根目录，也就是 `COM3D2.exe` 所在的位置。

## 开始迁移

### 脚本翻译

找到 `COM3D2\LBWtranslation` 文件夹

将 `"COM3D2\LBWtranslation\Script"` 内的文件复制到 `COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Text\`

默认是 `zh-CN`，即 `COM3D2\BepInEx\JustAnotherTranslator\zh-CN\Text`

### 纹理翻译

找到 `COM3D2\LBWtranslation` 文件夹

将 `COM3D2\LBWtranslation\Texture`  内的文件复制到 `COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Texture\`

### 舞蹈歌词字幕

你可能不需要迁移这个，因为 JAT 发布时已附带歌词。

找到 `COM3D2\LBWtranslation` 文件夹

下载转换脚本 `lyric_csv_format_convert_Chinese.py`

[https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin/tree/main/Script](https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin/tree/main/Script)

- 确保你已安装 Python3
- 在脚本旁边的空白处点击右键，选择在终端中打开
- 在终端中输入 `python lyric_csv_format_convert_Chinese.py COM3D2/LBWtranslation/DanceSubtitle/csv_rhythm_action COM3D2/BepInEx/JustAnotherTranslator/<你设置的语言>/Lyric`
- 记得把路径替换为你的实际路径
- 例如 `python lyric_csv_format_convert_Chinese.py X:/HG/maid/COM3D2/LBWtranslation/DanceSubtitle/csv_rhythm_action X:/HG/maid/COM3D2/BepInEx/JustAnotherTranslator/<你设置的语言>/Lyric`
- 您可以直接运行 `python lyric_csv_format_convert_Chinese.py` 它会给您一些说明

对于一般用户来说，使用 Python 脚本可能是一个艰巨的挑战，如果您不知道，请把脚本内容复制给 AI，然后请 AI 教您使用。


## 清理

文件位置不固定，建议直接搜索文件名并删除 `LBWmodifier.dll` `LBWmodifier-Transator D3V.dll`
`LBWmodifier-Transator D4V.dll`

删除 `COM3D2\BepInEx\plugins\LBWmodifier.dll"` 文件，这是插件 dll 所在位置

删除 `COM3D2\BepInEx\plugins\Translator D3V` 文件夹，这是插件 dll 所在位置

删除 `COM3D2\BepInEx\plugins\LBWmodifier-Transator D3V.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\BepInEx\plugins\Translator D4V` 文件夹，这是插件 dll 所在位置

删除 `COM3D2\BepInEx\plugins\LBWmodifier-Transator D4V.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\LBWtranslation` 这是你的翻译文件夹（可选）

# 从 COM3D2.i18nEx 迁移

## 迁移前准备

请先按照 [README](https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin) 中的步骤完成插件初始化配置。

也就是这两个路径应该已经有文件了

- 配置文件位于: `COM3D2\BepInEx\config\Github.MeidoPromotionAssociation.COM3D2.JustAnotherTranslator.Plugin.cfg`
- 翻译文件夹根目录位于: `COM3D2\BepInEx\JustAnotherTranslator`

路径开头的 `COM3D2\` 都是指您的游戏根目录，也就是 `COM3D2.exe` 所在的位置。

## 开始迁移

### 脚本翻译

找到 `COM3D2\i18nEx\<你设置的语言>\Script` 文件夹

通常为 `COM3D2\i18nEx\English\Script`

如果你有非常多的 .txt 文件，那么你可以将它们压缩后放置到 `COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Text`

大体上，i18nEX 的脚本翻译格式和 JAT 相同，但有一些细节上的不同，例如无需用制表符替换 <E>，[参见](https://github.com/ghorsington/COM3D2.i18nEx/wiki/How-to-translate#script-translations)

含有 <E> 等标记的文本实际上是一段官方使用的含有多种语言的标记文本，例如：`这是日文原文<e>This is English text<sc>这是简体中文文本`

对于此种情况，官方代码会将其解析为对应的语言文本，然后再根据当前游戏语言来决定使用哪一个

JAT 会在官方将其解析到对应语言后再使用日文原文进行翻译，无法使用整个字符串。

例如原文为 `这是日文原文<e>This is English text<sc>这是简体中文文本`

在 JAT 中应该写为 `这是日文原文         This is targer language text`

注意是制表符而不是空格

目前没有脚本可以直接处理这种情况，需要手动处理

<br>

对于字幕来说，i18nEX 使用与官方相同的标记格式，JAT 不使用这个，请查看翻译指南。

<br>

如果你有一个 .zip 或 .zst 其中有一个 .bson 文件

你需要进行一些格式转换，由于我不使用 i18nEX，因此我无法提供帮助，欢迎提交 PR

### 纹理翻译

找到 `COM3D2\i18nEx\<你设置的语言>\Textures` 文件夹

通常为 `COM3D2\i18nEx\English\Textures`

将 `COM3D2\i18nEx\<你设置的语言>\Textures` 内的文件复制到 `COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Texture\`

### UI 翻译

找到 `COM3D2\i18nEx\<你设置的语言>\UI` 文件夹

下载转换脚本 `ui_csv_format_convert_Chinese.py`

请注意，此脚本只能处理 .csv 格式。

如果你有一个 .zip 或 .zst 其中有一个 .bson 文件，脚本无法处理，你需要进行一些格式转换，由于我不使用 i18nEX，因此我无法提供帮助，欢迎提交 PR

[https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin/tree/main/Script](https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin/tree/main/Script)

- 确保你已安装 Python3
- 在脚本旁边的空白处点击右键，选择在终端中打开
- 在终端中输入 `python ui_csv_format_convert_Chinese.py COM3D2/i18nEx/<你设置的语言>/UI COM3D2/BepInEx/JustAnotherTranslator/<你设置的语言>/UI/Text`
- 记得把路径替换为你的实际路径
- 例如 `python ui_csv_format_convert_Chinese.py X:/HG/maid/COM3D2/i18nEx/English/UI X:/HG/maid/COM3D2/BepInEx/JustAnotherTranslator/English/UI/Text`
- 您可以直接运行 `python ui_csv_format_convert_Chinese.py` 它会给您一些说明

对于一般用户来说，使用 Python 脚本可能是一个艰巨的挑战，如果您不知道，请把脚本内容复制给 AI，然后请 AI 教您使用。

## 清理

删除 `COM3D2\BepInEx\plugins\I18N` 文件夹，这是插件 dll 所在位置

删除 `COM3D2\i18nEx` 这是你的翻译文件夹（可选）

# 从 COM3D2.YATranslator / CM3D2.YATranslator 迁移

## 迁移前准备

安装 JustAnotherTranslator 后启动一次并退出，这是为了让插件生成必要的文件。
请先按照 [README](https://github.com/MeidoPromotionAssociation/COM3D2.JustAnotherTranslator.Plugin) 中的步骤完成插件初始化配置。

也就是这两个路径应该已经有文件了

- 配置文件位于: `COM3D2\BepInEx\config\Github.MeidoPromotionAssociation.COM3D2.JustAnotherTranslator.Plugin.cfg`
- 翻译文件夹根目录位于: `COM3D2\BepInEx\JustAnotherTranslator`

路径开头的 `COM3D2\` 都是指您的游戏根目录，也就是 `COM3D2.exe` 所在的位置。

## 开始迁移

### 脚本翻译

找到 `COM3D2\Sybaris\UnityInjector\Config\Strings` 文件夹

将 `COM3D2\Sybaris\UnityInjector\Config\Strings` 内的文件复制到 `COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Text\`

### 纹理翻译

找到 `COM3D2\Sybaris\UnityInjector\Config\Textures` 文件夹

将 `COM3D2\Sybaris\UnityInjector\Config\Textures` 内的文件复制到
`COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Texture\`

找到 `"COM3D2\Sybaris\UnityInjector\Config\Assets"` 文件夹

将 `"COM3D2\Sybaris\UnityInjector\Config\Assets"` 内的文件复制到
`COM3D2\BepInEx\JustAnotherTranslator\<你设置的语言>\Texture\`

## 与 XUnity.AutoTranslator 集成

JAT 自动与 [XUnity.AutoTranslator](https://github.com/bbepis/XUnity.AutoTranslator) 集成，被 JAT 翻译过的文本将不会再被 XUAT 翻译。

无需像以前一样处理翻译文本。

## 清理

删除 `COM3D2\Sybaris\UnityInjector\COM3D2.YATranslator.Plugin.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\Sybaris\UnityInjector\CM3D2.YATranslator.Plugin.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\Sybaris\UnityInjector\COM3D2.YATranslator.Hook.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\Sybaris\UnityInjector\CM3D2.YATranslator.Hook.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\Sybaris\UnityInjector\COM3D2.YATranslator.Sybaris.Patcher.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\Sybaris\UnityInjector\CM3D2.YATranslator.Sybaris.Patcher.dll` 文件，这是插件 dll 所在位置

删除 `COM3D2\Sybaris\UnityInjector\Config\Strings` 这是你的翻译文件夹（可选）

删除 `COM3D2\Sybaris\UnityInjector\Config\Textures` 这是你的翻译文件夹（可选）

删除 `COM3D2\Sybaris\UnityInjector\Config\Assets` 这是你的翻译文件夹（可选）